function BlueBike(e,g,d,c,f,b,a){this.lat=e;this.loc=g;this.description=d;this.capacityTotal=c;this.capacityInUse=f;this.capacityAvailable=b;this.capacityInMaintenance=a}var app={refresh:null,init:function(){app.load();app.toggle("l1");app.toggle("l2")},load:function(){app.loadOpenDataGhent("l1","https://datatank.stad.gent/4/mobiliteit/bluebikedeelfietsensintpieters.json");app.loadOpenDataGhent("l2","https://datatank.stad.gent/4/mobiliteit/bluebikedeelfietsendampoort.json")},loadOpenDataGhent:function(b,a){$.ajax({dataType:"json",url:a,method:"get",cache:false,success:function(c){app.toHtml(b,new BlueBike(c.geometry.coordinates[0],c.geometry.coordinates[1],c.properties.description,c.properties.attributes[0].value,c.properties.attributes[1].value,c.properties.attributes[2].value,c.properties.attributes[3].value));$("#error").slideUp();app.changeSymbolState("running")},error:function(){$("#error").slideDown();app.changeSymbolState("paused");if(app.refresh==null){app.refresh=setTimeout(function(){app.load();console.log("check internet connection");app.refresh=null},5000)}}})},changeSymbolState:function(a){$(".symbol").css({"-webkit-animation-play-state":a,"-moz-animation-play-state":a,"-o-animation-play-state":a,"animation-play-state":a})},toHtml:function(c,a){var b=$("#"+c+" .content");app.buildChart(c,a);b.find(".capacity-total").html(a.capacityTotal);b.find(".capacity-in-use").html(a.capacityInUse);b.find(".capacity-available").html(a.capacityAvailable);b.find(".capacity-in-maintenance").html(a.capacityInMaintenance);b.find(".btn-map").attr("href","http://maps.google.com/maps?z=12&t=m&q=loc:"+a.loc+"+"+a.lat);b.find(".loading").html("")},buildChart:function(b,a){$("#"+b+" .chart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false,type:"pie"},colors:["#E92A2A","#53E63F","#E6C83F"],credits:{enabled:false},title:{text:null},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:true,dataLabels:{enabled:false},point:{events:{legendItemClick:function(c){c.preventDefault()}}},showInLegend:true}},series:[{colorByPoint:true,data:[{name:"In gebruik",y:a.capacityInUse},{name:"Beschikbaar",y:a.capacityAvailable},{name:"In onderhoud",y:a.capacityInMaintenance}]}]})},toggle:function(b){var a=$("#"+b+" .header");a.click(function(){var c=$("#"+b+" .closed")[0];$("#"+b).find(".content").slideToggle();if(c){a.removeClass("closed");a.addClass("open")}else{a.removeClass("open");a.addClass("closed")}})}};$(document).ready(function(){app.init();setInterval(function(){app.load();console.log("60s interval")},60000)});